import{_ as P,a as B,r as S,x as C,y as d,b as m,c as h,e as o,w as k,z as f,d as n,f as v,k as i,h as w,g as L,A as T,B as u,C as U,p as R,n as z,I as D}from"./index-c14d0632.js";import{_ as M}from"./loginLogo-fa5a1cf8.js";const _=l=>(R("data-v-0d650844"),l=l(),z(),l),$={class:"login"},A=_(()=>o("div",{class:"topBox"},[o("p",{class:"title"},"账号登录"),o("img",{src:M})],-1)),E={class:"inputBox"},F={key:0,class:"error"},J={key:1,class:"error"},O={class:"protocol"},j=_(()=>o("a",{href:"#"},"用户协议",-1)),q=_(()=>o("a",{href:"#"},"隐私政策",-1)),G={class:"bottomBox"},H=["disabled"],K=_(()=>o("span",null,"忘记密码?",-1)),Q={__name:"LoginView",setup(l){let g=B();S(0);let e=C({checked:0,userName:"",userPsd:""});const x=d(()=>{const a=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/;return e.userName&&a.test(e.userName)}),p=d(()=>e.userPsd&&e.userPsd.length>=10),V=d(()=>e.checked===!0&&x.value&&p.value?(console.log("条件满足"),"opacity: 1"):(console.log("条件不满足"),"opacity: 0.5")),N=d(()=>e.checked&&x.value&&p.value);function y(){const a=localStorage.getItem("user");if(a){const s=JSON.parse(a),r=e.userName,c=e.userPsd;if(r===s.username&&c===s.password){const t=b();console.log(t),localStorage.setItem("token",t),u("登录成功!"),g.back()}else u("账号或密码错误!"),console.log("账号或密码错误!")}else u("账号不存在!"),console.log("账号不存在!")}function b(){const a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const c=Math.random()*16|0;return(r=="x"?c:c&3|8).toString(16)});return btoa(a)}function I(){u("跳转注册页"),g.replace({name:"register"})}return(a,s)=>{const r=D,c=U;return m(),h("div",$,[A,o("div",E,[k(o("input",{type:"number","onUpdate:modelValue":s[0]||(s[0]=t=>n(e).userName=t),placeholder:"手机号码/账号ID"},null,512),[[f,n(e).userName,void 0,{trim:!0}]]),n(e).userName&&!x.value?(m(),h("div",F,[v(r,{name:"warning-o"}),i(" 手机号码格式不正确")])):w("",!0),k(o("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>n(e).userPsd=t),placeholder:"请输入密码"},null,512),[[f,n(e).userPsd,void 0,{trim:!0}]]),n(e).userPsd&&!p.value?(m(),h("div",J,[v(r,{name:"warning-o"}),i(" 密码长度必须大于等于10")])):w("",!0),o("div",O,[v(c,{modelValue:n(e).checked,"onUpdate:modelValue":s[2]||(s[2]=t=>n(e).checked=t)},{default:L(()=>[i(" 已阅读并同意 "),j,i(" 和 "),q]),_:1},8,["modelValue"])])]),o("div",G,[o("button",{style:T(V.value),disabled:!N.value,onClick:y},"登录",12,H),o("div",{class:"login-method"},[o("span",{onClick:I},"立即注册 | "),K])])])}}},Y=P(Q,[["__scopeId","data-v-0d650844"]]);export{Y as default};
