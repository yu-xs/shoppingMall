import{D as ne,E as K,r as z,ai as Fe,y as W,Y as ie,aj as _e,a1 as E,a3 as Pe,ak as xe,o as ue,a4 as oe,f as l,R as Y,J as T,a9 as A,w as ce,al as $e,U as q,I as M,K as de,x as ve,am as Ae,Z as Ee,P as me,m as Ne,an as J,ao as se,ap as V,aq as Ve,ar as Ce,as as ke,at as fe,au as Ye,a8 as Re,W as j,T as ge,av as Xe,aw as Ze,ax as G,ae as je,S as Me,aa as He,ay as ze,L as te,az as We,aA as Je,aB as pe,aC as Ge,aD as Le,aE as qe,v as he,aF as Ke,_ as Qe,u as ea,a as aa,b as oa,c as ta,e as ee,g as we,d as ye,ad as na,aG as la,Q as ia,k as sa,p as ra,n as ca,aH as ua}from"./index-c14d0632.js";/* empty css              */import{N as da}from"./index-03909772.js";const[va,X]=ne("image"),ma={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:Y,height:Y,radius:Y,lazyLoad:Boolean,iconSize:Y,showError:T,errorIcon:A("photo-fail"),iconPrefix:String,showLoading:T,loadingIcon:A("photo")};var fa=K({name:va,props:ma,emits:["load","error"],setup(e,{emit:n,slots:c}){const a=z(!1),u=z(!0),s=z(),{$Lazyload:b}=Fe().proxy,S=W(()=>{const r={width:ie(e.width),height:ie(e.height)};return _e(e.radius)&&(r.overflow="hidden",r.borderRadius=ie(e.radius)),r});E(()=>e.src,()=>{a.value=!1,u.value=!0});const I=r=>{u.value&&(u.value=!1,n("load",r))},w=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:s.value,enumerable:!0}),I(r)},i=r=>{a.value=!0,u.value=!1,n("error",r)},m=(r,p,O)=>O?O():l(M,{name:r,size:e.iconSize,class:p,classPrefix:e.iconPrefix},null),y=()=>{if(u.value&&e.showLoading)return l("div",{class:X("loading")},[m(e.loadingIcon,X("loading-icon"),c.loading)]);if(a.value&&e.showError)return l("div",{class:X("error")},[m(e.errorIcon,X("error-icon"),c.error)])},h=()=>{if(a.value||!e.src)return;const r={alt:e.alt,class:X("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?ce(l("img",q({ref:s},r),null),[[$e("lazy"),e.src]]):l("img",q({ref:s,src:e.src,onLoad:I,onError:i},r),null)},P=({el:r})=>{const p=()=>{r===s.value&&u.value&&w()};s.value?p():oe(p)},B=({el:r})=>{r===s.value&&!a.value&&i()};return b&&Pe&&(b.$on("loaded",P),b.$on("error",B),xe(()=>{b.$off("loaded",P),b.$off("error",B)})),ue(()=>{oe(()=>{var r;(r=s.value)!=null&&r.complete&&!e.lazyLoad&&w()})}),()=>{var r;return l("div",{class:X({round:e.round,block:e.block}),style:S.value},[h(),y(),(r=c.default)==null?void 0:r.call(c)])}}});const Oe=de(fa),be=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),ga=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),re=ne("image-preview")[1],Ie=2.6,ha={src:String,show:Boolean,active:Number,minZoom:J(Y),maxZoom:J(Y),rootWidth:J(Number),rootHeight:J(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickOverlay:Boolean};var wa=K({props:ha,emits:["scale","close","longPress"],setup(e,{emit:n,slots:c}){const a=ve({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),u=Ae(),s=z(),b=z(),S=z(!1),I=z(!1);let w=0;const i=W(()=>{const{scale:t,moveX:d,moveY:g,moving:R,zooming:L,initializing:$}=a,Q={transitionDuration:L||R||$?"0s":".3s"};return(t!==1||I.value)&&(Q.transform=`matrix(${t}, 0, 0, ${t}, ${d}, ${g})`),Q}),m=W(()=>{if(a.imageRatio){const{rootWidth:t,rootHeight:d}=e,g=S.value?d/a.imageRatio:t;return Math.max(0,(a.scale*g-t)/2)}return 0}),y=W(()=>{if(a.imageRatio){const{rootWidth:t,rootHeight:d}=e,g=S.value?d:t*a.imageRatio;return Math.max(0,(a.scale*g-d)/2)}return 0}),h=(t,d)=>{var g;if(t=V(t,+e.minZoom,+e.maxZoom+1),t!==a.scale){const R=t/a.scale;if(a.scale=t,d){const L=ke((g=s.value)==null?void 0:g.$el),$={x:L.width*.5,y:L.height*.5},Q=a.moveX-(d.x-L.left-$.x)*(R-1),Be=a.moveY-(d.y-L.top-$.y)*(R-1);a.moveX=V(Q,-m.value,m.value),a.moveY=V(Be,-y.value,y.value)}else a.moveX=0,a.moveY=I.value?w:0;n("scale",{scale:t,index:e.active})}},P=()=>{h(1)},B=()=>{const t=a.scale>1?1:2;h(t,t===2||I.value?{x:u.startX.value,y:u.startY.value}:void 0)};let r,p,O,f,U,k,N,H,o=!1;const v=t=>{const{touches:d}=t;if(r=d.length,r===2&&e.disableZoom)return;const{offsetX:g}=u;u.start(t),p=a.moveX,O=a.moveY,H=Date.now(),o=!1,a.moving=r===1&&(a.scale!==1||I.value),a.zooming=r===2&&!g.value,a.zooming&&(f=a.scale,U=be(d))},C=t=>{const{touches:d}=t;if(u.move(t),a.moving){const{deltaX:g,deltaY:R}=u,L=g.value+p,$=R.value+O;if((L>m.value||L<-m.value)&&!o&&u.isHorizontal()){a.moving=!1;return}o=!0,se(t,!0),a.moveX=V(L,-m.value,m.value),a.moveY=V($,-y.value,y.value)}if(a.zooming&&(se(t,!0),d.length===2)){const g=be(d),R=f*g/U;k=ga(d),h(R,k)}},x=t=>{var d;if(r>1)return;const{offsetX:g,offsetY:R}=u,L=Date.now()-H,$=250;if(g.value<fe&&R.value<fe)if(L<$)if(e.doubleScale)if(N)clearTimeout(N),N=null,B();else{if(!e.closeOnClickOverlay&&t.target===((d=b.value)==null?void 0:d.$el))return;N=setTimeout(()=>{n("close"),N=null},$)}else n("close");else L>Ye&&n("longPress")},D=t=>{let d=!1;if((a.moving||a.zooming)&&(d=!0,a.moving&&p===a.moveX&&O===a.moveY&&(d=!1),!t.touches.length)){a.zooming&&(a.moveX=V(a.moveX,-m.value,m.value),a.moveY=V(a.moveY,-y.value,y.value),a.zooming=!1),a.moving=!1,p=0,O=0,f=1,a.scale<1&&P();const g=+e.maxZoom;a.scale>g&&h(g,k)}se(t,d),x(t),u.reset()},F=()=>{const{rootWidth:t,rootHeight:d}=e,g=d/t,{imageRatio:R}=a;S.value=a.imageRatio>g&&R<Ie,I.value=a.imageRatio>g&&R>=Ie,I.value&&(w=(R*t-d)/2,a.moveY=w,a.initializing=!0,Ve(()=>{a.initializing=!1})),P()},le=t=>{const{naturalWidth:d,naturalHeight:g}=t.target;a.imageRatio=g/d,F()};return E(()=>e.active,P),E(()=>e.show,t=>{t||P()}),E(()=>[e.rootWidth,e.rootHeight],F),Ee("touchmove",C,{target:W(()=>{var t;return(t=b.value)==null?void 0:t.$el})}),me({resetScale:P}),()=>{const t={loading:()=>l(Ce,{type:"spinner"},null)};return l(Ne,{ref:b,class:re("swipe-item"),onTouchstartPassive:v,onTouchend:D,onTouchcancel:D},{default:()=>[c.image?l("div",{class:re("image-wrap")},[c.image({src:e.src})]):l(Oe,{ref:s,src:e.src,fit:"contain",class:re("image",{vertical:S.value}),style:i.value,onLoad:le},t)]})}}});const[ya,Z]=ne("image-preview"),ba=["show","teleport","transition","overlayStyle","closeOnPopstate"],Ia={show:Boolean,loop:T,images:Re(),minZoom:j(1/3),maxZoom:j(3),overlay:T,closeable:Boolean,showIndex:T,className:ge,closeIcon:A("clear"),transition:String,beforeClose:Function,doubleScale:T,overlayClass:ge,overlayStyle:Object,swipeDuration:j(300),startPosition:j(0),showIndicators:Boolean,closeOnPopstate:T,closeOnClickOverlay:T,closeIconPosition:A("top-right"),teleport:[String,Object]};var Te=K({name:ya,props:Ia,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:n,slots:c}){const a=z(),u=z(),s=ve({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),b=()=>{if(a.value){const f=ke(a.value.$el);s.rootWidth=f.width,s.rootHeight=f.height,a.value.resize()}},S=f=>n("scale",f),I=f=>n("update:show",f),w=()=>{ze(e.beforeClose,{args:[s.active],done:()=>I(!1)})},i=f=>{f!==s.active&&(s.active=f,n("change",f))},m=()=>{if(e.showIndex)return l("div",{class:Z("index")},[c.index?c.index({index:s.active}):`${s.active+1} / ${e.images.length}`])},y=()=>{if(c.cover)return l("div",{class:Z("cover")},[c.cover()])},h=()=>{s.disableZoom=!0},P=()=>{s.disableZoom=!1},B=()=>l(Me,{ref:a,lazyRender:!0,loop:e.loop,class:Z("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:i,onDragEnd:P,onDragStart:h},{default:()=>[e.images.map((f,U)=>l(wa,{ref:k=>{U===s.active&&(u.value=k)},src:f,show:e.show,active:s.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:s.rootWidth,rootHeight:s.rootHeight,disableZoom:s.disableZoom,doubleScale:e.doubleScale,closeOnClickOverlay:e.closeOnClickOverlay,onScale:S,onClose:w,onLongPress:()=>n("longPress",{index:U})},{image:c.image}))]}),r=()=>{if(e.closeable)return l(M,{role:"button",name:e.closeIcon,class:[Z("close-icon",e.closeIconPosition),He],onClick:w},null)},p=()=>n("closed"),O=(f,U)=>{var k;return(k=a.value)==null?void 0:k.swipeTo(f,U)};return me({resetScale:()=>{var f;(f=u.value)==null||f.resetScale()},swipeTo:O}),ue(b),E([Xe,Ze],b),E(()=>e.startPosition,f=>i(+f)),E(()=>e.show,f=>{const{images:U,startPosition:k}=e;f?(i(+k),oe(()=>{b(),O(+k,{immediate:!0})})):n("close",{index:s.active,url:U[s.active]})}),()=>l(je,q({class:[Z(),e.className],overlayClass:[Z("overlay"),e.overlayClass],onClosed:p,"onUpdate:show":I},G(e,ba)),{default:()=>[r(),B(),m(),y()]})}});let ae;const Sa={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function _a(){({instance:ae}=We({setup(){const{state:e,toggle:n}=Je(),c=()=>{e.images=[]};return()=>l(Te,q(e,{onClosed:c,"onUpdate:show":n}),null)}}))}const Pa=(e,n=0)=>{if(Pe)return ae||_a(),e=Array.isArray(e)?{images:e,startPosition:n}:e,ae.open(te({},Sa,e)),ae};de(Te);const[xa,_,Ca]=ne("uploader");function Se(e,n){return new Promise(c=>{if(n==="file"){c();return}const a=new FileReader;a.onload=u=>{c(u.target.result)},n==="dataUrl"?a.readAsDataURL(e):n==="text"&&a.readAsText(e)})}function Ue(e,n){return pe(e).some(c=>c.file?Ge(n)?n(c.file):c.file.size>+n:!1)}function ka(e,n){const c=[],a=[];return e.forEach(u=>{Ue(u,n)?a.push(u):c.push(u)}),{valid:c,invalid:a}}const Ra=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,za=e=>Ra.test(e);function De(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?za(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var pa=K({props:{name:Y,item:J(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:n,slots:c}){const a=()=>{const{status:i,message:m}=e.item;if(i==="uploading"||i==="failed"){const y=i==="failed"?l(M,{name:"close",class:_("mask-icon")},null):l(Ce,{class:_("loading")},null),h=_e(m)&&m!=="";return l("div",{class:_("mask")},[y,h&&l("div",{class:_("mask-message")},[m])])}},u=i=>{const{name:m,item:y,index:h,beforeDelete:P}=e;i.stopPropagation(),ze(P,{args:[y,{name:m,index:h}],done:()=>n("delete")})},s=()=>n("preview"),b=()=>n("reupload"),S=()=>{if(e.deletable&&e.item.status!=="uploading"){const i=c["preview-delete"];return l("div",{role:"button",class:_("preview-delete",{shadow:!i}),tabindex:0,"aria-label":Ca("delete"),onClick:u},[i?i():l(M,{name:"cross",class:_("preview-delete-icon")},null)])}},I=()=>{if(c["preview-cover"]){const{index:i,item:m}=e;return l("div",{class:_("preview-cover")},[c["preview-cover"](te({index:i},m))])}},w=()=>{const{item:i,lazyLoad:m,imageFit:y,previewSize:h,reupload:P}=e;return De(i)?l(Oe,{fit:y,src:i.objectUrl||i.content||i.url,class:_("preview-image"),width:Array.isArray(h)?h[0]:h,height:Array.isArray(h)?h[1]:h,lazyLoad:m,onClick:P?b:s},{default:I}):l("div",{class:_("file"),style:Le(e.previewSize)},[l(M,{class:_("file-icon"),name:"description"},null),l("div",{class:[_("file-name"),"van-ellipsis"]},[i.file?i.file.name:i.url]),I()])};return()=>l("div",{class:_("preview")},[w(),a(),S()])}});const La={name:j(""),accept:A("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:j(1/0),imageFit:A("cover"),resultType:A("dataUrl"),uploadIcon:A("photograph"),uploadText:String,deletable:T,reupload:Boolean,afterRead:Function,showUpload:T,modelValue:Re(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:T,previewOptions:Object,previewFullImage:T,maxSize:{type:[Number,String,Function],default:1/0}};var Oa=K({name:xa,props:La,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:n,slots:c}){const a=z(),u=[],s=z(-1),b=z(!1),S=(o=e.modelValue.length)=>({name:e.name,index:o}),I=()=>{a.value&&(a.value.value="")},w=o=>{if(I(),Ue(o,e.maxSize))if(Array.isArray(o)){const v=ka(o,e.maxSize);if(o=v.valid,n("oversize",v.invalid,S()),!o.length)return}else{n("oversize",o,S());return}if(o=ve(o),s.value>-1){const v=[...e.modelValue];v.splice(s.value,1,o),n("update:modelValue",v),s.value=-1}else n("update:modelValue",[...e.modelValue,...pe(o)]);e.afterRead&&e.afterRead(o,S())},i=o=>{const{maxCount:v,modelValue:C,resultType:x}=e;if(Array.isArray(o)){const D=+v-C.length;o.length>D&&(o=o.slice(0,D)),Promise.all(o.map(F=>Se(F,x))).then(F=>{const le=o.map((t,d)=>{const g={file:t,status:"",message:"",objectUrl:URL.createObjectURL(t)};return F[d]&&(g.content=F[d]),g});w(le)})}else Se(o,x).then(D=>{const F={file:o,status:"",message:"",objectUrl:URL.createObjectURL(o)};D&&(F.content=D),w(F)})},m=o=>{const{files:v}=o.target;if(e.disabled||!v||!v.length)return;const C=v.length===1?v[0]:[].slice.call(v);if(e.beforeRead){const x=e.beforeRead(C,S());if(!x){I();return}if(Ke(x)){x.then(D=>{i(D||C)}).catch(I);return}}i(C)};let y;const h=()=>n("closePreview"),P=o=>{if(e.previewFullImage){const v=e.modelValue.filter(De),C=v.map(x=>(x.objectUrl&&!x.url&&x.status!=="failed"&&(x.url=x.objectUrl,u.push(x.url)),x.url)).filter(Boolean);y=Pa(te({images:C,startPosition:v.indexOf(o),onClose:h},e.previewOptions))}},B=()=>{y&&y.close()},r=(o,v)=>{const C=e.modelValue.slice(0);C.splice(v,1),n("update:modelValue",C),n("delete",o,S(v))},p=o=>{b.value=!0,s.value=o,oe(()=>H())},O=()=>{b.value||(s.value=-1),b.value=!1},f=(o,v)=>{const C=["imageFit","deletable","reupload","previewSize","beforeDelete"],x=te(G(e,C),G(o,C,!0));return l(pa,q({item:o,index:v,onClick:()=>n(e.reupload?"clickReupload":"clickPreview",o,S(v)),onDelete:()=>r(o,v),onPreview:()=>P(o),onReupload:()=>p(v)},G(e,["name","lazyLoad"]),x),G(c,["preview-cover","preview-delete"]))},U=()=>{if(e.previewImage)return e.modelValue.map(f)},k=o=>n("clickUpload",o),N=()=>{if(e.modelValue.length>=+e.maxCount&&!e.reupload)return;const o=e.modelValue.length>=+e.maxCount&&e.reupload,v=e.readonly?null:l("input",{ref:a,type:"file",class:_("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&s.value===-1,disabled:e.disabled,onChange:m,onClick:O},null);return c.default?ce(l("div",{class:_("input-wrapper"),onClick:k},[c.default(),v]),[[he,!o]]):ce(l("div",{class:_("upload",{readonly:e.readonly}),style:Le(e.previewSize),onClick:k},[l(M,{name:e.uploadIcon,class:_("upload-icon")},null),e.uploadText&&l("span",{class:_("upload-text")},[e.uploadText]),v]),[[he,e.showUpload&&!o]])},H=()=>{a.value&&!e.disabled&&a.value.click()};return xe(()=>{u.forEach(o=>URL.revokeObjectURL(o))}),me({chooseFile:H,closeImagePreview:B}),qe(()=>e.modelValue),()=>l("div",{class:_()},[l("div",{class:_("wrapper",{disabled:e.disabled})},[U(),N()])])}});const Ta=de(Oa);const Ua=e=>(ra("data-v-fa71763c"),e=e(),ca(),e),Da={class:"userInfo"},Ba={class:"userImg"},Fa=Ua(()=>ee("span",{class:"left"},"头像",-1)),$a={class:"right"},Aa=["src"],Ea={__name:"UserInfoView",setup(e){let n=ea(),c=aa(),a=z(n.params.userName),u=z(n.params.userImg);const s=w=>{console.log(w);const i=JSON.parse(localStorage.getItem("user"));i.userImg=w.content,localStorage.setItem("user",JSON.stringify(i)),u.value=w.content};E(a,w=>{console.log(w);const i=JSON.parse(localStorage.getItem("user"));i.nickname=w,localStorage.setItem("user",JSON.stringify(i))});const b=()=>{c.push({name:"shipAddress"})},S=()=>{localStorage.removeItem("token"),c.push("/home")};function I(){history.back()}return ue(()=>{}),(w,i)=>{const m=da,y=Ta,h=la,P=ua,B=ia;return oa(),ta("div",Da,[l(m,{title:"个人信息","left-arrow":"",onClickLeft:I}),ee("div",Ba,[Fa,ee("div",$a,[l(y,{"after-read":s},{default:we(()=>[ee("img",{src:`${ye(u)}`},null,8,Aa)]),_:1})])]),l(h,{modelValue:ye(a),"onUpdate:modelValue":i[0]||(i[0]=r=>na(a)?a.value=r:a=r),"input-align":"right",clearable:"",label:"昵称"},null,8,["modelValue"]),l(P,{title:"收货地址",onClick:b,"is-link":""}),l(B,{color:"linear-gradient(to right, #ff6034, #ee0a24)",onClick:S},{default:we(()=>[sa(" 退出登录 ")]),_:1})])}}},Xa=Qe(Ea,[["__scopeId","data-v-fa71763c"]]);export{Xa as default};
